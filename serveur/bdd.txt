create database Optali_db character set 'utf8';
use Optali_db;

// Format DATE : 'aaaa-mm-dd'
mysql -h localhost -u root -p


CREATE TABLE Date(
    IdDate INTEGER UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    Date DATE,
    NbDate integer DEFAULT '1'
);


CREATE TABLE Product(
    IdProduct INTEGER UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    Product varchar (70) NOT NULL,
    NbProdIn integer DEFAULT '1',
    NbProdBought integer DEFAULT '1'
);    

CREATE TABLE Recipe(
    IdRecipe INTEGER UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    Recipe varchar (70) NOT NULL
);    


CREATE TABLE Unity(
    IdUnity INTEGER UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    IdDate INTEGER UNSIGNED,
    IdProduct INTEGER UNSIGNED,
    NbUnity integer DEFAULT '1',
    FOREIGN KEY (IdDate)
    REFERENCES Date(IdDate)
    ON DELETE SET NULL
    ON UPDATE SET NULL,
    FOREIGN KEY (IdProduct)
    REFERENCES Product(IdProduct)
    ON DELETE SET NULL
    ON UPDATE SET NULL
);

CREATE TABLE ListProduct(
    IdListProduct INTEGER UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    IdRecipe INTEGER UNSIGNED,
    IdProduct INTEGER UNSIGNED,
    FOREIGN KEY (IdRecipe)
    REFERENCES Recipe(IdRecipe)
    ON DELETE SET NULL
    ON UPDATE SET NULL,
    FOREIGN KEY (IdProduct)
    REFERENCES Product(IdProduct)
    ON DELETE SET NULL
    ON UPDATE SET NULL
);

// Aide modification table
ALTER TABLE nom_table ADD ... -- permet d'ajouter quelque chose (une colonne par exemple)
ALTER TABLE nom_table DROP ... -- permet de retirer quelque chose 
ALTER TABLE nom_table CHANGE ...
ALTER TABLE nom_table MODIFY ... -- permettent de modifier une colonne

// Aide insertion
INSERT INTO Animal 
VALUES (1, 'chien', 'M', '2010-04-05 13:43:00', 'Rox', 'Mordille beaucoup');

SELECT * FROM Animal;

show tables;
describe Date;




